{"changed":true,"filter":false,"title":"C1.html","tooltip":"/sampledb/C1.html","value":"\n\n<!DOCTYPE html>\n<html>\n<head lang=\"en\">\n  <meta charset=\"UTF-8\">\n  <title>Crypto module example</title>\n  <script src=\"../sampledb/ydn.db-isw-core-crypt-qry-dev.js\"></script>\n  \n   <script type=\"text/javascript\" src=\"../sampledb/s.js\"></script>\n   <script type=\"text/javascript\" src=\"../sampledb/jsc/ydn.db-dev.js\"></script>\n</head>\n<body>\n<h3>Using crypto module</h3>\n\n<input type=\"text\" id=\"name\"/>\n<input type=\"text\" id=\"number\"/>\n<input type=\"text\" id=\"password\"/>\n\n<br>\n<br>\n<input type=\"button\" value =\"submit\" onclick=\"addRecord()\" id=\"submit\"/>\n<input type=\"button\" value=\"cancle\" id=\"cancel\"/>\n\n\n<script>\n  var schema = {\n    stores: [{\n      name: 'table',\n     \n    }]\n  };\n  var options = {\n    method: 'rc4',\n    exposeKey: true,\n    secrets: [{\n      name: 'aaaa',\n      key: 'aYHF6vfuGHpfWS*eRLrPQxZjSó~É5c6HjCscqDqRtZasp¡JWSMGaW'\n    }]\n  };\n  var cipher = new ydn.crypto.Cipher(options);\n  \n  var db = new ydn.db.Storage('crypto-demo', schema);\n/*\n  db.put('store', messages.map(function(msg) {\n    return cipher.encrypt(msg);\n  })).done(function(keys) {\n    console.log(keys);\n    db.values('store', keys).done(function(packages) {\n      return packages.map(function(obj) {\n        return cipher.decrypt(obj);\n      });\n    }).done(function(objs) {\n      console.log('query by keys', objs);\n    });\n  });\n\n  db.values('store').done(function(packages) {\n    return packages.map(function(obj) {\n      console.log(obj);\n      return cipher.decrypt(obj);\n    });\n  }).done(function(msgs) {\n    console.log('all decrypted messages', msgs);\n  });\n  \n  */\n  \n  \n  \n  \n  \n  \n  \n  \n  \n  \n  function addRecord() {\n    \n    \n    var name = document.getElementById('name').value;\n    var number = document.getElementById('number').value;\n    var password = document.getElementById('password').value;\n    \n    \n    \n    var ob={\n      \n      'name':name,\n      'mobile':number,\n      'key':password\n      \n    \n    };\n  val=JSON.stringify(ob)\n    \n    var package = cipher.encrypt({val, password});\n    \n    db.put('table', package, password);\n    \n    /*\n    db.put('store', messages.map(function(ob) {\n    return cipher.encrypt();\n  })).done(function(keys) {\n    console.log(keys);\n    db.values('store', keys).done(function(packages) {\n      return packages.map(function(ob) {\n        return cipher.decrypt(ob);\n      });\n    }).done(function(objs) {\n      console.log('query by keys', ob);\n    });\n*/\n    var original = cipher.decrypt(package,password);\n   \n\n   \n   //values = JSON.parse(original);\n   \n   \n   \n    \n    \n    \n  \n    \n    \n  }\n  \n  \n  \n  \n  \n  \n  \n  \n  \n  \n  \n  \n  \n</script>\n   <script type=\"text/javascript\" src=\"../sampledb/jsc/ydn.db-dev.js\"></script>\n</body>\n</html>","undoManager":{"mark":-2,"position":-1,"stack":[]},"ace":{"folds":[],"scrolltop":32,"scrollleft":0,"selection":{"start":{"row":23,"column":0},"end":{"row":23,"column":0},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":{"row":1,"state":"start","mode":"ace/mode/html"}},"timestamp":1462613682351}